<html>
	<head>
		<meta charset="utf-8">
		<title>dayChart</title>
		<script src="../static/Chart.js"></script>
	</head>
	<body>
		<div style="width:50%">
			<div>
				<canvas id="canvas" height="50%" width="70%"></canvas>
			</div>
		</div>


<script type="text/javascript">
	function loadChart()
	{
		var xmlhttp;
		if (window.XMLHttpRequest)
		{
			xmlhttp=new XMLHttpRequest();
		}
		else
		{
			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange=function()
		{
			if (xmlhttp.readyState==4 && xmlhttp.status==200)
			{
				   var result = xmlhttp.responseText;

                   //使用eval函数使返回的字符串变成js对象
                   var datas = eval("(" + result + ")");

				var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
				var lineChartData = {
					labels : ["5","10","20","30","40","50","60","70","80","90","100","110","120","130","140","150","160","170","180","up"],
					datasets : [
						{
							label: "My First dataset",
							fillColor : "rgba(220,220,220,0.2)",
							strokeColor : "rgba(220,220,220,1)",
							pointColor : "rgba(220,220,220,1)",
							pointStrokeColor : "#fff",
							pointHighlightFill : "#fff",
							pointHighlightStroke : "rgba(220,220,220,1)",
							data : [datas[0].count5,
							        datas[0].count10,
							        datas[0].count20,
							        datas[0].count30,
							        datas[0].count40,
							        datas[0].count50,
							        datas[0].count60,
							        datas[0].count70,
							        datas[0].count80,
							        datas[0].count90,
							        datas[0].count100,
							        datas[0].count110,
							        datas[0].count120,
							        datas[0].count130,
							        datas[0].count140,
							        datas[0].count150,
							        datas[0].count160,
							        datas[0].count170,
							        datas[0].count180,
							        100]
						},
						{
							label: "My Second dataset",
							fillColor : "rgba(151,187,205,0.2)",
							strokeColor : "rgba(151,187,205,1)",
							pointColor : "rgba(151,187,205,1)",
							pointStrokeColor : "#fff",
							pointHighlightFill : "#fff",
							pointHighlightStroke : "rgba(151,187,205,1)",
							data : [datas[1].count5,
							        datas[1].count10,
							        datas[1].count20,
							        datas[1].count30,
							        datas[1].count40,
							        datas[1].count50,
							        datas[1].count60,
							        datas[1].count70,
							        datas[1].count80,
							        datas[1].count90,
							        datas[1].count100,
							        datas[1].count110,
							        datas[1].count120,
							        datas[1].count130,
							        datas[1].count140,
							        datas[1].count150,
							        datas[1].count160,
							        datas[1].count170,
							        datas[1].count180,
							        100]
						}
					]
		
				}
				var ctx = document.getElementById("canvas").getContext("2d");
				window.myLine = new Chart(ctx).Line(lineChartData, {
					responsive: true
				});
			}
			
		}
		xmlhttp.open("POST","/statistics",true);
		xmlhttp.send();
	}	

	window.onload = function(){
		loadChart();
	}
</script>

	</body>
</html>